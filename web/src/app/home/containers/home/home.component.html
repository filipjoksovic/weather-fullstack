<app-location-search></app-location-search>
<app-selected-location></app-selected-location>

<div class="weather-overview">
  @if (forecast$()) {
    <div class="card weather-forecast">
      <p-dataView #dv [value]="forecast$().measurements">
        <ng-template pTemplate="list">
          @for (measurement of forecast$().measurements; track $index) {
            <div class="forecast-measurement">
              <div class="">
                <div class="">
                  <div class="">
                    {{ measurement.date | appDayOfWeek }}
                    <i class="fa fa-sun"></i>
                    <div class="forecast-measurement__temperature-interval">
                      {{ measurement.minTemperature | appUnitValueToString }}
                      <p-slider
                        [min]="
                          measurement.minTemperature.value -
                          measurement.minTemperature.value / 10
                        "
                        [max]="
                          measurement.maxTemperature.value +
                          measurement.maxTemperature.value / 10
                        "
                        [range]="true"
                        [ngModel]="[
                          measurement.minTemperature.value,
                          measurement.maxTemperature.value
                        ]"></p-slider>
                      {{ measurement.maxTemperature | appUnitValueToString }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          }
        </ng-template>
      </p-dataView>
    </div>
  }

  @if (weather$()) {
    <div class="weather-data">
      <app-weather-measurement
        icon="fa fa-cloud"
        title="Cloud cover"
        [measurement]="weather$().cloudCover"></app-weather-measurement>

      <app-weather-measurement
        icon="fa fa-droplet"
        title="Precipitation"
        [measurement]="weather$().precipitation"></app-weather-measurement>
      <app-weather-measurement
        icon="fa fa-droplet"
        title="Humidity"
        [measurement]="weather$().humidity"></app-weather-measurement>
      <app-weather-measurement
        icon="fa fa-gauge"
        title="Pressure"
        [measurement]="weather$().pressure"></app-weather-measurement>
      <app-weather-measurement
        icon="fa fa-cloud-rain"
        title="Rain"
        [measurement]="weather$().rain"></app-weather-measurement>
      <app-weather-measurement
        icon="fa fa-cloud-showers-heavy"
        title="Showers"
        [measurement]="weather$().showers"></app-weather-measurement>
      <app-weather-measurement
        icon="fa fa-snowflake"
        title="Snowfall"
        [measurement]="weather$().snowfall"></app-weather-measurement>
      <app-weather-measurement
        icon="fa fa-gauge"
        title="Surface pressure"
        [measurement]="weather$().surfacePressure"></app-weather-measurement>
      <app-weather-measurement
        icon="fa fa-temperature-half"
        title="Temperature"
        [measurement]="weather$().temperature"></app-weather-measurement>
      <app-weather-measurement
        icon="fa-solid fa-compass"
        title="Wind direction"
        [measurement]="weather$().windDirection"></app-weather-measurement>
      <app-weather-measurement
        icon="fa fa-wind"
        title="Wind speed"
        [measurement]="weather$().windSpeed"></app-weather-measurement>
    </div>
  }
</div>
